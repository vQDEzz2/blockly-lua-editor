<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Blockly Lua Game Engine Editor</title>
  <link rel="stylesheet" href="styles.css" />
  <!-- Include Blockly's CSS -->
  <link rel="stylesheet" href="https://unpkg.com/blockly/media/blockly.min.css" />
  <!-- Include Blockly's JavaScript -->
  <script src="https://unpkg.com/blockly/blockly.min.js"></script>
  <script src="https://unpkg.com/blockly/lua.min.js"></script>
  <!-- Include FileSaver.js for downloading code -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
</head>
<body>
  <h1>Blockly Lua Game Engine Editor</h1>
  <div id="blocklyDiv"></div>
  <h2>Generated Lua Code:</h2>
  <pre id="code"></pre>
  <button id="downloadBtn">Download Lua Code</button>
  <!-- Define the toolbox -->
  <xml id="toolbox" style="display: none">
    <category name="Game Engine" colour="120">
      <block type="game_init"></block>
      <block type="game_draw"></block>
      <block type="game_update"></block>
      <block type="key_pressed"></block>
      <block type="load_image"></block>
      <block type="draw_image"></block>
      <block type="load_sound"></block>
      <block type="play_sound"></block>
    </category>
    <category name="Logic" colour="%{BKY_LOGIC_HUE}">
      <block type="controls_if"></block>
      <block type="logic_compare"></block>
      <block type="logic_operation"></block>
      <block type="logic_negate"></block>
      <block type="logic_boolean"></block>
    </category>
    <category name="Loops" colour="%{BKY_LOOPS_HUE}">
      <block type="controls_repeat_ext"></block>
      <block type="controls_whileUntil"></block>
      <block type="controls_for"></block>
      <block type="controls_flow_statements"></block>
    </category>
    <category name="Math" colour="%{BKY_MATH_HUE}">
      <block type="math_number"></block>
      <block type="math_arithmetic"></block>
      <block type="math_single"></block>
      <block type="math_trig"></block>
      <block type="math_constant"></block>
      <block type="math_number_property"></block>
      <block type="math_round"></block>
      <block type="math_modulo"></block>
      <block type="math_constrain"></block>
      <block type="math_random_int"></block>
      <block type="math_random_float"></block>
    </category>
    <category name="Text" colour="%{BKY_TEXTS_HUE}">
      <block type="text"></block>
      <block type="text_join"></block>
      <block type="text_append"></block>
      <block type="text_length"></block>
      <block type="text_isEmpty"></block>
      <block type="text_indexOf"></block>
      <block type="text_charAt"></block>
      <block type="text_getSubstring"></block>
      <block type="text_changeCase"></block>
      <block type="text_trim"></block>
      <block type="text_print"></block>
      <block type="text_prompt_ext"></block>
    </category>
    <category name="Variables" custom="VARIABLE" colour="%{BKY_VARIABLES_HUE}">
    </category>
    <category name="Functions" custom="PROCEDURE" colour="%{BKY_PROCEDURES_HUE}">
    </category>
  </xml>
  <!-- Include your main JavaScript file -->
  <script src="main.js"></script>
</body>
</html>
